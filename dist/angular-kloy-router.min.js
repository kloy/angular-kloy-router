require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){function c(a,b,c){var d={};this.sections=function(){return e.copy(d)},this.sync=function(){Object.keys(a).forEach(function(b){var e=a[b],f={},g=null;f.template=function(a){g=a},c.invoke(e,f),d[b]=g})}}function d(){var a={};this.addSection=function(b,c){var d;if(b in a)throw d="LayoutManagerProvider.addSection() duplicate section ",d+="definition: "+b;return a[b]=c,this},this.$get=["$rootScope","$injector",function(b,d){return new c(a,b,d)}]}var e=a("ng");b.exports=d},{ng:"QBxXRv"}],QBxXRv:[function(a,b){b.exports=angular},{}],ng:[function(a,b){b.exports=a("QBxXRv")},{}],4:[function(a){"use strict";var b=a("ng");b.module("kloy.router",[]).constant("KLOY_ROUTER_EVENTS",{ROUTE_CHANGE_START:"kloyRouteChangeStart",ROUTE_CHANGE_SUCCESS:"kloyRouteChangeSuccess",ROUTE_CHANGE_ERROR:"kloyRouteChangeError",ROUTE_CHANGE_REQUEST:"kloyRouteChangeRequest"}).provider("kloyRouter",a("./router")).provider("kloyLayoutManager",a("./layout-manager")).factory("kloyRoute",a("./route")).directive("srRoute",a("./route-directive")).run(["kloyLayoutManager","$rootScope","KLOY_ROUTER_EVENTS",function(a,b,c){b.section=function(b){return a.sections()[b]||null},b.$on(c.ROUTE_CHANGE_SUCCESS,function(){a.sync()})}]).run(["$rootScope","KLOY_ROUTER_EVENTS","kloyRouter","$location","kloyRoute",function(a,b,c,d,e){a.$on(b.ROUTE_CHANGE_REQUEST,function(a,b,d){c.toRoute(b,d)}),a.$on("$locationChangeSuccess",function(a,b,f){var g=d.path(),h=e.path(),i=!0;(i===!0&&g!==h||g!==h&&b!==f)&&(g=d.path(),c.toPath(g)),i=!1})}])},{"./layout-manager":1,"./route":6,"./route-directive":5,"./router":7,ng:"QBxXRv"}],5:[function(a,b){var c=["$log","kloyRouter","$compile","$rootScope","$parse",function(a,b,c,d,e){var f={restrict:"A"},g=function(a){return"A"===a[0].tagName.toUpperCase()};return d.srToRoute=function(a,c){b.toRoute(a,c)},f.link=function(a,c,d){var f,h,i,j;j=function(){f=e(d.srRoute)(a),h=d.srParams?e(d.srParams)(a):void 0,i=b.getPathFor(f,h),g(c)&&d.$set("href","#"+i||"")},a.$watch(d.srRoute,j),a.$watch(d.srParams,j),c.on("click",function(){b.toRoute(f,h)})},f}];b.exports=c},{}],6:[function(a,b){var c=a("ng"),d=function(){var a,b,d,e,f={};return f._update=function(c){a=c.params||void 0,b=c.name||void 0,d=c.data||void 0,e=c.path||void 0},f.params=function(){return a},f.name=function(){return b},f.data=function(){return c.copy(d)},f.path=function(){return e},f.is=function(a){return f.name()===a},f.not=function(a){return!f.is(a)},f.includes=function(a){return-1!==f.name().indexOf(a)},f.excludes=function(a){return!f.includes(a)},f.startsWith=function(a){return f.name().substring(0,a.length)===a},f.endsWith=function(a){var b=f.name();return b.substring(b.length-a.length)===a},f};b.exports=d},{ng:"QBxXRv"}],7:[function(a,b){var c=a("ng"),d=function(a,b,d,e,f,g,h,i,j){var k,l,m,n,o,p,q,r,s,t,u,v={},w={},x={},y=g.ROUTE_CHANGE_START,z=g.ROUTE_CHANGE_SUCCESS,A=g.ROUTE_CHANGE_ERROR,B=!1;return u=function(a,b){var c={},d=!0;return a.forEach(function(a){c[a]=!0}),b.every(function(a){return c.hasOwnProperty(a)?!0:(d=!1,!1)}),d},t=function(a){return a=a.trim(),a=a.replace(/ +(?= )/g,""),a=a.replace(/ /g,"%20"),a=a.replace(/([^:]\/)\/+/g,"$1"),a=a.toLowerCase(),a="/"!==a.charAt(0)?"/"+a:a,a="/"===a.charAt(a.length-1)?a.substring(0,a.length-1):a},n=function(){c.forEach(a,function(a,b){var d,e;d=w[b]||{},e={permissions:function(a){return c.isDefined(a)&&(d.permissions=a),d.permissions},requiredParams:function(a){return c.isDefined(a)&&(d.requiredParams=a),d.requiredParams},prefetch:function(a){return c.isDefined(a)&&(d.prefetchFn=a),d.prefetchFn},data:function(a){return c.isDefined(a)&&(d.data=c.copy(a)),d.data},path:function(a){return c.isDefined(a)&&(d.path=t(a)),d.path}},d.requiredParams=d.requiredParams||[],a.forEach(function(a){a.bind(e)()}),w[b]=d})},p=function(){c.forEach(w,function(a,b){var d=a.path;if(c.isDefined(d)){if(d in x)throw"router.buildPathsConfig(): path already defined for route "+x[d]+" cannot define duplicate for route "+b;x[d]=b}})},k=function(a){var e,f=[];return a=a||[],e=i.defer(),e.resolve(),f.push(e.promise),a.forEach(function(a){var e,g;if(e=b[a],!c.isFunction(e))throw"router.checkPermissions(): unknown permission "+a;try{g=d.invoke(e)}catch(i){throw h.error("router.checkPermissions(): problem invoking permission",i),i}f.push(g)}),i.all(f)},l=function(a,b){var c,d=i.defer();return a=a||{},c=Object.keys(a),0===b.length?(d.resolve(),d.promise):u(c,b)?(d.resolve(),d.promise):i.reject("missing required param(s)")},m=function(a){var b,e;if(c.isUndefined(a))return e=i.defer(),e.resolve(),e.promise;if(!c.isFunction(a))throw"router.prefetch(): argument must be a function or undefined";try{b=d.invoke(a)}catch(f){throw h.error("router.doPrefetch(): problem invoking prefetch",f),f}return b},o=function(a,b){var d,f=[];c.isUndefined(a)||(a.split("/").forEach(function(a){f.push(":"===a.charAt(0)?b[a.substr(1)]:a)}),d=f.join("/"),e.path(d))},q=function(a){return c.isDefined(x[a])?!0:r(a)!==!1?!0:!1},r=function(a){var b=!1,c=a.split("/"),d=Object.keys(x);return d.every(function(d){var e,f=d.split("/"),g=[];return f.length!==c.length?!0:(f.forEach(function(a,b){g.push(":"===a.charAt(0)?c[b]:a)}),e=g.join("/"),e!==a?!0:(b=d,!1))}),b},s=function(a,b){var c,d=a.split("/"),e=b.split("/");return d.forEach(function(a,b){":"===a.charAt(0)&&(c=c||{},c[a.substr(1)]=e[b])}),c},v.toPath=function(a){var b,c,d,e;return a=t(a),(b=q(a))?(c=r(a),d=x[c],e=s(c,a),v.toRoute(d,e)):(f.$broadcast(A,{type:"unknown_path",message:"Path "+a+" does not match a route"},void 0,j),i.reject("unknown_path"))},v.toRoute=function(a,b){var d,e,g,n;if(n=w[a],c.isUndefined(n))throw"router.toRoute() unknown route "+a;return B?(e="router.toRoute(): paused, cannot go to "+a,h.debug(e),i.reject(e)):(f.$broadcast(y,a,j),g=!1,d=k(n.permissions).then(function(){return l(b,n.requiredParams)},function(b){return g?i.reject(b):(h.debug("router.toRoute(): permissions error",b,a),f.$broadcast(A,{message:b,type:"permissions"},a,j),g=!0,i.reject(b))}).then(function(){return m(n.prefetchFn)},function(b){return g?i.reject(b):(h.debug("router.toRoute(): params error",b,a),f.$broadcast(A,{message:b,type:"params"},a,j),g=!0,i.reject(b))}).then(null,function(b){return g?i.reject(b):(h.debug("router.toRoute(): prefetch error",b,a),f.$broadcast(A,{message:b,type:"prefetch"},a,j),g=!0,i.reject(b))}).then(function(c){var d=n.path;return j._update({params:b,name:a,data:n.data,path:d}),o(d,b),f.$broadcast(z,a,j),c}))},v.getPathFor=function(a,b){var d,e,f;if(b=b||{},f=Object.keys(b),d=w[a],!c.isDefined(d))throw"router.getPathFor(): Unknown route "+a;if(e=d.path||null,!u(f,d.requiredParams))throw"router.getPathFor(): Missing required params for "+a;return c.forEach(b,function(a,b){e=e.replace(":"+b,a)}),e},v.pause=function(){return B=!0,v},v.play=function(){return B=!1,v},n(),p(),v},e=function(){var a={},b={},e={};return a.addRoute=function(c,d){if(c in b)throw"routerProvider.addRoute() route already defined "+c;return b[c]=[d],a},a.modifyRoute=function(d,e){if(c.isUndefined(b[d]))throw"routerProvider.modifyRoute() route not defined "+d;return b[d].push(e),a},a.addPermission=function(b,c){if(b in e)throw"routerProvider.addPermission(): permission already defined";return e[b]=c,a},a.$get=["$injector","$location","$rootScope","KLOY_ROUTER_EVENTS","$log","$q","kloyRoute",function(a,c,f,g,h,i,j){return d(b,e,a,c,f,g,h,i,j)}],a};b.exports=e},{ng:"QBxXRv"}]},{},[4]);